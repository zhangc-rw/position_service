<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<title>大坝位移监测系统</title>
<!-- Tell the browser to be responsive to screen width -->
<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
<link rel="stylesheet" href="../../../../static/css/bootstrap.min.css">
<!-- Font Awesome -->
<link rel="stylesheet" href="../../../../static/css/font-awesome.min.css">
<!-- Ionicons -->
<link rel="stylesheet" href="../../../../static/css/ionicons.min.css">
<!-- DataTables -->
<link rel="stylesheet" href="../../../../static/css/dataTables.bootstrap.min.css">
<!-- Theme style -->
<link rel="stylesheet" href="../../../../static/css/AdminLTE.min.css">
<!-- AdminLTE Skins. We have chosen the skin-blue for this starter
        page. However, you can choose any other skin. Make sure you
        apply the skin class to the body tag so the changes take effect. -->
<link rel="stylesheet" href="../../../../static/css/skin-blue.min.css">
<link rel="stylesheet" href="../../../../static/css/_all-skins.min.css">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

<style type="text/css">
body, html {
	width: 100%;
	height: 100%;
	margin: 0;
	font-family: "微软雅黑";
}
#allmap {
	height: 500px;
	width: 100%;
}
#r-result {
	width: 100%;
}
</style>
<!-- Google Font -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
</head>
<!--
BODY TAG OPTIONS:
=================
Apply one or more of the following classes to get the
desired effect
|---------------------------------------------------------|
| SKINS         | skin-blue                               |
|               | skin-black                              |
|               | skin-purple                             |
|               | skin-yellow                             |
|               | skin-red                                |
|               | skin-green                              |
|---------------------------------------------------------|
|LAYOUT OPTIONS | fixed                                   |
|               | layout-boxed                            |
|               | layout-top-nav                          |
|               | sidebar-collapse                        |
|               | sidebar-mini                            |
|---------------------------------------------------------|
-->

<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper"> 
  
  <!-- Main Header -->
  <header class="main-header"> 
    
    <!-- Logo --> 
    <a href="#" class="logo"> 
    <!-- mini logo for sidebar mini 50x50 pixels --> 
    <span class="logo-mini">监测系统</span> 
    <!-- logo for regular state and mobile devices --> 
    <span class="logo-lg">大坝位移监测系统</span> </a> 
    
    <!-- Header Navbar -->
    <nav class="navbar navbar-../../../static-top" role="navigation"> 
      <!-- Sidebar toggle button--> 
      <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button"> <span class="sr-only">Toggle navigation</span> </a> 
      <!-- Navbar Right Menu -->
      <div class="navbar-custom-menu">
        <ul class="nav navbar-nav">
          <!-- User Account Menu -->
          <li class="dropdown user user-menu"> 
            <!-- Menu Toggle Button --> 
            <!--
            <a href="#" class="dropdown-toggle" data-toggle="dropdown"> 
            <!-- The user image in the navbar--> 
            <!--
            <img src="../../../static/img/user2-160x160.jpg" class="user-image" alt="User Image"> 
            <!-- hidden-xs hides the username on small devices so only the image appears. --> 
            <!--
            <span class="hidden-xs">Alexander Pierce</span> </a>
            -->
            <ul class="dropdown-menu">
              <!-- The user image in the menu -->
              <li class="user-header"> <img src="../../../static/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                <p> Alexander Pierce - Web Developer <small>Member since Nov. 2012</small> </p>
              </li>
              <!-- Menu Body -->
              <li class="user-body">
                <div class="row">
                  <div class="col-xs-4 text-center"> <a href="#">Followers</a> </div>
                  <div class="col-xs-4 text-center"> <a href="#">Sales</a> </div>
                  <div class="col-xs-4 text-center"> <a href="#">Friends</a> </div>
                </div>
                <!-- /.row --> 
              </li>
              <!-- Menu Footer-->
              <li class="user-footer">
                <div class="pull-left"> <a href="#" class="btn btn-default btn-flat">Profile</a> </div>
                <div class="pull-right"> <a href="#" class="btn btn-default btn-flat">Sign out</a> </div>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </nav>
  </header>
  <!-- Left side column. contains the logo and sidebar -->
  <aside class="main-sidebar"> 
    
    <!-- sidebar: style can be found in sidebar.less -->
    <section class="sidebar"> 
      <!-- Sidebar Menu -->
      <ul class="sidebar-menu" data-widget="tree">
        <!-- Optionally, you can add icons to the links -->
        <li><a href="/Dam_Device_management/DandL_management"><i class="fa fa-link"></i><span>设备管理</span></a></li>
        <li class="active"><a href="/Dam_Device_management/history_search"><i class="fa fa-link"></i><span>历史查看</span></a></li>        <li><a href="/Dam_Device_management/realTime_search"><i class="fa fa-link"></i><span>实时查看</span></a></li>
      </ul>
      <!-- /.sidebar-menu --> 
    </section>
    <!-- /.sidebar --> 
  </aside>
  
  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper"> 
    <!-- Main content -->
    <section class="content container-fluid">
      <div class="row">
        <div class="col-md-12"> 
          <!-- Custom Tabs (Pulled to the right) -->
          <div class="nav-tabs-custom">
            <ul class="nav nav-tabs pull-right">
              <li class="active"><a href="#tab_history_chart" data-toggle="tab">历史数据图</a></li>
            </ul>
            <div class="tab-content"> {% csrf_token %}
              <div class="tab-pane active" id="tab_history_chart"> 
                <!-- Main content -->
                <section class="content">
                  <div class="row">
                    <div class="col-xs-12"> 
                      <!-- Line CHART -->
                      <div class="box box-primary">
                        <div class="box-header with-border">
                          <button type="button" class="btn btn-info pull-right submitBtn" onClick="JavaScript:window.history.back();">返回</button>
                        </div>
                        <div class="box-body">
                          <h4 class="box-title">位移曲线</h4>
                          <div id="line-chart-1" style="width: 100%; height: 300px;"> </div>
                          <h4 class="box-title">温度曲线</h4>
                          <div id="line-chart-2" style="width: 100%; height: 300px;"> </div>
                          <!--
                          <h4 class="box-title">X坐标</h4>
                          <div id="line-chart-3" style="width: 100%; height: 300px;"> </div>
                          <h4 class="box-title">Y坐标</h4>
                          <div id="line-chart-4" style="width: 100%; height: 300px;"> </div>
                          <h4 class="box-title">Z坐标</h4>
                          <div id="line-chart-5" style="width: 100%; height: 300px;"> </div>
                      -->
                        </div>
                        <!-- /.box-body --> 
                      </div>
                      <!-- /.box --> 
                    </div>
                    <!-- /.col --> 
                  </div>
                  <!-- /.row --> 
                </section>
                <!-- /.content --> 
              </div>
              <!-- /.tab_history_chart --> 
            </div>
            <!-- /.tab-content --> 
          </div>
          <!-- nav-tabs-custom --> 
        </div>
        <!-- /.col --> 
      </div>
    </section>
    <!-- /.content --> 
  </div>
  <!-- /.content-wrapper --> 
</div>
<!-- ./wrapper --> 

<!-- REQUIRED JS SCRIPTS --> 

<!-- jQuery 3 --> 
<script src="../../../../static/js/jquery.min.js"></script> 
<!-- Bootstrap 3.3.7 --> 
<script src="../../../../static/js/bootstrap.min.js"></script> 
<!-- DataTables --> 
<script src="../../../../static/js/jquery.dataTables.min.js"></script> 
<script src="../../../../static/js/dataTables.bootstrap.min.js"></script> 
<!-- AdminLTE App --> 
<script src="../../../../static/js/adminlte.min.js"></script> 
<!-- vue --> 
<script src="../../../../static/js/vue.js"></script> 
<script src="../../../../static/js/csrf.js"></script> 
<script src="../../../../static/js/fastclick.js"></script> 
<!-- AdminLTE for demo purposes --> 
<script src="../../../../static/js/demo.js"></script> 
<!-- FLOT CHARTS --> 
<script src="../../../../static/js/jquery.flot.js"></script> 
<!-- FLOT RESIZE PLUGIN - allows the chart to redraw when the window is resized --> 
<script src="../../../../static/js/jquery.flot.resize.js"></script> 
<!-- FLOT PIE PLUGIN - also used to draw donut charts --> 
<script src="../../../../static/js/jquery.flot.pie.js"></script> 
<!-- FLOT CATEGORIES PLUGIN - Used to draw bar charts --> 
<script src="../../../../static/js/jquery.flot.categories.js"></script> 
<script src="../../../../static/js/jquery.flot.time.min.js"></script> 

<!-- Optionally, you can add Slimscroll and FastClick plugins.
     Both of these plugins are recommended to enhance the
     user experience. --> 
<script>
 $(document).ready(function(){
              $.ajaxSetup({  
                   data: {csrfmiddlewaretoken: '{{ csrf_token }}' },  
              }); 
			  
	/*
     * LINE CHART 1
     * ----------
     */
    //LINE randomly generated data
	
	var Num_list = {{Num_list|safe}};//数量列表，每个元素都规定每一条线的数据个数
	//console.log(Num_list);
	//var min_Num_list = Math.min.apply(null, Num_list);//取出最小值，以此数量作为line_time和line_data的个数  放弃
	//console.log(min_Num_list)
	
	//按Num_list中的个数，循环定义数组变量
	for (var i = 0; i < Num_list.length; i++) {
		window["line_time"+i] = [];//画图用的line_time
		window["line_time_show"+i] = [];//标签显示用的line_time_show
		window["line_data"+i] = [];//画图用的line_data
		window["line_array"+i] = [];//存放line_time和line_data，生成二维坐标
		window["line_draw"+i] = {};//存放line_array和颜色等...
		window["line_Name"+i] = [];//存放line_name，明确具体标签、基站，线的种类，元素带引号
		window["line_name"+i] = [];//存放line_name，明确具体标签、基站，线的种类，元素不带引号
	}
	//console.log(line_time1)
	
	var Time_list_past = {{Time_list|safe}};//从后台传回的时间列表
	console.log(Time_list_past)
	//console.log(Time_list.length)
	var Time_list_YMD = [];//拆分出年月日
	var Time_list_YMD_past = [];//拆分出年月日,作为显示label使用
	//var Time_list_ymd = [];//转为数值数组
	//var Time_list_d = [];//方便取出最后一个元素
	var Time_list_HM = [];//拆分出小时分钟
	for(var k=0;k<Time_list_past.length;k++){
		Time_list_YMD.push(Time_list_past[k].split(" ")[0]);//通过设置的“ ”进行拆分，取第一个元素（年月日）放在一个数组中
		Time_list_YMD_past.push(Time_list_past[k].split(" ")[0]);//通过设置的“ ”进行拆分，取第一个元素（年月日）放在一个数组中，在图例中显示
		Time_list_HM.push(Time_list_past[k].split(" ")[1]);//通过设置的“ ”进行拆分，取第二个元素（小时分钟）放在一个数组中
		//Time_list_ymd = String(Time_list_YMD);//转为数值数组，"-"也是元素了！
		//Time_list_d = Time_list_ymd[Time_list_ymd.length-1];
           } 
		//console.log(Time_list_YMD)
		//console.log(Time_list_YMD_past)
		//console.log(Time_list_HM)
		
	//统一换成同一天时间
	for(var i=0;i<Time_list_YMD.length;i++){
		Time_list_YMD[i] = Time_list_YMD[0];
	}
		//console.log(Time_list_YMD)
		
	//合并数组
	var Time_list = [];//拼接后最终使用的时间
	for(var i=0;i<Time_list_YMD.length;i++){
		Time_list.push(Time_list_YMD[i]+" "+Time_list_HM[i]);
	}
	//console.log(Time_list)
		
	
	//转化时间为中国标准时间格式
	//var time_list_YMD = [], time_list_HM = [];
	var time_list = [];
	for (var k = 0; k < Time_list.length; k++) {
		time_list.push(new Date (Time_list[k]));
	}
	//console.log(time_list)
	
	//由于要把所有时间段的年月日统一起来，在此处单独写line_time的赋值  
	//for (var k = 0; k < Num_list.length; k++) {
		//window["line_time"+k] = time_list.slice(0,Num_list[k]);
		//console.log(window["line_time"+k])
	//}	
	//console.log(line_time0)
	//console.log((window["line_time"+1])[0])
	
	var Data_list = {{Data_list|safe}};//距离列表，存放具体数据
	//console.log(Data_list);
	
	var Name_list = {{Name_list|safe}};//明确具体标签，基站，温度，数据1、2、3
	//console.log(Name_list);
	//按Num_list中的个数，取出Name_list
	//console.log(Name_list.length)
	for (var n = 0; n < Name_list.length; n++) {
		window["line_Name"+n].push(Name_list[n]);
		window["line_name"+n] = JSON.parse('[' + String(window["line_Name"+n]) + ']');//转为数组，逗号也是元素了！
		//console.log(window["line_name"+n])
	}
	//console.log(line_name1[1])
	
	//按Num_list中的个数，取出Time_list_YMD_past,time_list,Data_list（第一个）方法不同
	
	
	for (var s = 0; s < Num_list[0]; s++) {
		window["line_time_show"+0].push(Time_list_YMD_past[s]);
		window["line_time"+0].push(time_list[s]);
		window["line_data"+0].push(Data_list[s]);
	}
	//console.log(line_data0)
	//console.log(window["line_time_show"+0])
	
	//按Num_list中的个数，取出Time_list_YMD_past,time_list,Data_list（从第二个开始）
	var isFirst = 1;//只执行一次
	var start;
	for (var j = 1; j < Num_list.length;j++) {
		if(isFirst==1){
			start = Num_list[j-1];
			isFirst = 0;
		}
		window["line_time_show"+j] = Time_list_YMD_past.slice(start,start + Num_list[j]);
		window["line_time"+j] = time_list.slice(start,start + Num_list[j]);
		window["line_data"+j] = Data_list.slice(start,start + Num_list[j]);
		start = start + Num_list[j];
		//console.log(window["line_data"+j])
		//console.log(window["line_time_show"+j])
	}
	//console.log((window["line_data"+6]))
	//console.log((window["line_time_show"+3]))
	//console.log((window["line_time_show"+1]).length)
	
	//将已获得的line_time和line_data放入line_array中，确立横纵坐标，以画图
    for (var t = 0; t < Num_list.length; t += 1) {
		for (var w = 0; w < window["line_time"+t].length; w += 1) {
			window["line_array"+t].push([(window["line_time"+t][w]), (window["line_data"+t][w])])//由于window是数组，因此要把元素取出来再push；同理，此处指pushline_time0
		}
		//console.log(window["line_array"+t])
    }

	//确定线的数据和颜色
	var happy_distance = [], happy_temperature = [], happy_X = [], happy_Y = [], happy_Z = [];
	var color_choose = ['#003E3E ','#467500','#006030','#424200','#FF0000','#28FF28','#844200','#613030','#0080FF','#000000','#ADADAD','#2F0000','#600030','#FF79BC','#28004D','#000079','#4DFFFF','#336666'];
	for (var h = 0; h < Num_list.length; h += 1) {
		//判断时间为空，不显示undefined
		if(window["line_time_show"+h].length==0){
			if(window["line_name"+h][3]==3 || window["line_name"+h][3]==4 || window["line_name"+h][3]==5){
				window["line_draw"+h] = {
					data : window["line_array"+h],
					color: color_choose[h],
					label: "该时间段没有数据" + " " + "基站" + ":" + window["line_name"+h][1] + " " + "标签" + ":" + window["line_name"+h][2],
				}
			}else{
				window["line_draw"+h] = {
					data : window["line_array"+h],
					color: color_choose[h],
					label: "该时间段没有数据" + " " + "基站" + ":" + window["line_name"+h][1] + " " + "标签" + ":" + window["line_name"+h][2],
				}
			}
		//明确数据类型
		}else{
			if(window["line_name"+h][3]==1){
				window["line_draw"+h] = {
					data : window["line_array"+h],
					color: color_choose[h],
					label: window["line_time_show"+h][0] + " " + "基站" + ":" + window["line_name"+h][1] + " " + "标签" + ":" + window["line_name"+h][2] + " " + "温度数据",
				}
			}else if(window["line_name"+h][3]==3){
				window["line_draw"+h] = {
					data : window["line_array"+h],
					color: color_choose[h],
					label: window["line_time_show"+h][0] + " " + "基站" + ":" + window["line_name"+h][1] + " " + "标签" + ":" + window["line_name"+h][2] + " " + "平均数据",
				}	
			}else if(window["line_name"+h][3]==4){
				window["line_draw"+h] = {
					data : window["line_array"+h],
					color: color_choose[h],
					label: window["line_time_show"+h][0] + " " + "基站" + ":" + window["line_name"+h][1] + " " + "标签" + ":" + window["line_name"+h][2] + " " + "收敛数据",
				}
			}else if(window["line_name"+h][3]==5){
				window["line_draw"+h] = {
					data : window["line_array"+h],
					color: color_choose[h],
					label: window["line_time_show"+h][0] + " " + "基站" + ":" + window["line_name"+h][1] + " " + "标签" + ":" + window["line_name"+h][2] + " " + "平滑数据",
				}
			}else if(window["line_name"+h][3]==6){
				window["line_draw"+h] = {
					data : window["line_array"+h],
					color: color_choose[h],
					label: window["line_time_show"+h][0] + " " + "标签" + ":" + window["line_name"+h][2],
				}	
			}else if(window["line_name"+h][3]==7){
				window["line_draw"+h] = {
					data : window["line_array"+h],
					color: color_choose[h],
					label: window["line_time_show"+h][0] + " " + "标签" + ":" + window["line_name"+h][2],
				}	
			}else if(window["line_name"+h][3]==8){
				window["line_draw"+h] = {
					data : window["line_array"+h],
					color: color_choose[h],
					label: window["line_time_show"+h][0] + " " + "标签" + ":" + window["line_name"+h][2],
				}	
			}
		}	
		
	//console.log(window["line_draw"+h])
	    if (window["line_name"+h][3] == 1) {
		    happy_temperature.push(window["line_draw"+h])//存放的温度曲线
	    }else if(window["line_name"+h][3] == 6){
		    happy_X.push(window["line_draw"+h])
	    }else if(window["line_name"+h][3] == 7){
		    happy_Y.push(window["line_draw"+h])
	    }else if(window["line_name"+h][3] == 8){
		    happy_Z.push(window["line_draw"+h])
	    }else{
		    happy_distance.push(window["line_draw"+h])//存放的位移曲线
	    }
	}// end for
	//console.log(happy_distance)
	//console.log(happy_temperature)
	
	
	//开始画线——位移
    $.plot('#line-chart-1', happy_distance, {
      grid  : {
        hoverable  : true,
        borderColor: '#111111',
        borderWidth: 1,
        tickColor  : '#8E8E8E'
      },
      series: {
        shadowSize: 0,
        lines     : {
          show: true
        },
        points    : {
          show: false
        }
      },
      //lines : {
        //fill : false,
        //color: ['#3c8dbc']
      //},
      yaxis : {
        show: true
      },
       xaxis : {
        show: true,
		mode:'time',
		tickFormatter:function(e){
			var d = new Date(e);
			if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() < 10) {
									return  '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();} 
									else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() >= 10) {
										return '0' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();} 
									else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
										return d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();}
									else if (d.getHours() >= 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
										return d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
									else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() < 10) {
										return d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();}
									else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
										return '0' + d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
									else if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
										return '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();} 
									else {
										return d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();}
		}
      }
    })
	
	//Initialize tooltip on hover
    $('<div class="tooltip-inner" id="line-chart-tooltip-1"></div>').css({
      position: 'absolute',
      display : 'none',
      opacity : 0.8
    }).appendTo('body')
	//格式 根据line_name第三个数区分是位移还是温度
    $('#line-chart-1').bind('plothover', function (event, pos, item) {
		
			if (item) {
				var x = item.datapoint[0],
            	y = item.datapoint[1].toFixed(4) //设定精度
				d = new Date(x);
				if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() < 10){
				timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();} 
				else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() >= 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();} 
				else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();}
				else if (d.getHours() >= 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
				else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() < 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();}
				else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
				else if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();}
				else {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();}
						
				$('#line-chart-tooltip-1').html(' 时间 ' +  ':' + timeStr + ' ; ' + ' 距离 ' + ':' + y + ' 米 ')
				.css({ top: item.pageY + 5, left: item.pageX + 5 })
        		.fadeIn(200)
				} else {
					$('#line-chart-tooltip-1').hide()
					}
				
	})
	
	//开始画线——温度
    $.plot('#line-chart-2', happy_temperature, {
      grid  : {
        hoverable  : true,
        borderColor: '#111111',
        borderWidth: 1,
        tickColor  : '#8E8E8E'
      },
      series: {
        shadowSize: 0,
        lines     : {
          show: true
        },
        points    : {
          show: false
        }
      },
      //lines : {
        //fill : false,
        //color: ['#3c8dbc']
      //},
      yaxis : {
        show: true
      },
     xaxis : {
        show: true,
		mode:'time',
		tickFormatter:function(e){
			var d = new Date(e);
			if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() < 10) {
									return  '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();} 
									else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() >= 10) {
										return '0' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();} 
									else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
										return d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();}
									else if (d.getHours() >= 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
										return d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
									else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() < 10) {
										return d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();}
									else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
										return '0' + d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
									else if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
										return '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();} 
									else {
										return d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();}
		}
      }
    })
	
	//Initialize tooltip on hover
    $('<div class="tooltip-inner" id="line-chart-tooltip-2"></div>').css({
      position: 'absolute',
      display : 'none',
      opacity : 0.8
    }).appendTo('body')
	//格式 根据line_name第三个数区分是位移还是温度
    $('#line-chart-2').bind('plothover', function (event, pos, item) {
		
			if (item) {
				var x = item.datapoint[0],
            	y = item.datapoint[1].toFixed(4) //设定精度
				d = new Date(x);
				if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() < 10){
				timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();} 
				else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() >= 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();} 
				else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();}
				else if (d.getHours() >= 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
				else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() < 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();}
				else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
				else if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();}
				else {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();}
						
				$('#line-chart-tooltip-2').html(' 时间 ' +  ':' + timeStr + ' ; ' + ' 温度 ' + ':' + y + ' 摄氏度 ')
				.css({ top: item.pageY + 5, left: item.pageX + 5 })
        		.fadeIn(200)
				} else {
					$('#line-chart-tooltip-2').hide()
					}
				
	})
	
	//开始画线——X
    $.plot('#line-chart-3', happy_X, {
      grid  : {
        hoverable  : true,
        borderColor: '#111111',
        borderWidth: 1,
        tickColor  : '#8E8E8E'
      },
      series: {
        shadowSize: 0,
        lines     : {
          show: true
        },
        points    : {
          show: false
        }
      },
      //lines : {
        //fill : false,
        //color: ['#3c8dbc']
      //},
      yaxis : {
        show: true
      },
       xaxis : {
        show: true,
		mode:'time',
		tickFormatter:function(e){
			var d = new Date(e);
			if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() < 10) {
									return  '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();} 
									else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() >= 10) {
										return '0' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();} 
									else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
										return d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();}
									else if (d.getHours() >= 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
										return d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
									else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() < 10) {
										return d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();}
									else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
										return '0' + d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
									else if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
										return '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();} 
									else {
										return d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();}
		}
      }
    })
	
	//Initialize tooltip on hover
    $('<div class="tooltip-inner" id="line-chart-tooltip-3"></div>').css({
      position: 'absolute',
      display : 'none',
      opacity : 0.8
    }).appendTo('body')
	//格式 根据line_name第三个数区分是位移还是温度
    $('#line-chart-3').bind('plothover', function (event, pos, item) {
		
			if (item) {
				var x = item.datapoint[0],
            	y = item.datapoint[1].toFixed(4) //设定精度
				d = new Date(x);
				if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() < 10){
				timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();} 
				else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() >= 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();} 
				else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();}
				else if (d.getHours() >= 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
				else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() < 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();}
				else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
				else if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();}
				else {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();}
						
				$('#line-chart-tooltip-3').html(' 时间 ' +  ':' + timeStr + ' ; ' + ' 距离 ' + ':' + y + ' 米 ')
				.css({ top: item.pageY + 5, left: item.pageX + 5 })
        		.fadeIn(200)
				} else {
					$('#line-chart-tooltip-3').hide()
					}
				
	})
	
	//开始画线——Y
    $.plot('#line-chart-4', happy_Y, {
      grid  : {
        hoverable  : true,
        borderColor: '#111111',
        borderWidth: 1,
        tickColor  : '#8E8E8E'
      },
      series: {
        shadowSize: 0,
        lines     : {
          show: true
        },
        points    : {
          show: false
        }
      },
      //lines : {
        //fill : false,
        //color: ['#3c8dbc']
      //},
      yaxis : {
        show: true
      },
       xaxis : {
        show: true,
		mode:'time',
		tickFormatter:function(e){
			var d = new Date(e);
			if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() < 10) {
									return  '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();} 
									else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() >= 10) {
										return '0' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();} 
									else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
										return d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();}
									else if (d.getHours() >= 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
										return d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
									else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() < 10) {
										return d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();}
									else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
										return '0' + d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
									else if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
										return '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();} 
									else {
										return d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();}
		}
      }
    })
	
	//Initialize tooltip on hover
    $('<div class="tooltip-inner" id="line-chart-tooltip-4"></div>').css({
      position: 'absolute',
      display : 'none',
      opacity : 0.8
    }).appendTo('body')
	//格式 根据line_name第三个数区分是位移还是温度
    $('#line-chart-4').bind('plothover', function (event, pos, item) {
		
			if (item) {
				var x = item.datapoint[0],
            	y = item.datapoint[1].toFixed(4) //设定精度
				d = new Date(x);
				if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() < 10){
				timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();} 
				else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() >= 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();} 
				else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();}
				else if (d.getHours() >= 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
				else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() < 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();}
				else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
				else if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();}
				else {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();}
						
				$('#line-chart-tooltip-4').html(' 时间 ' +  ':' + timeStr + ' ; ' + ' 距离 ' + ':' + y + ' 米 ')
				.css({ top: item.pageY + 5, left: item.pageX + 5 })
        		.fadeIn(200)
				} else {
					$('#line-chart-tooltip-4').hide()
					}
				
	})
	
	//开始画线——Z
    $.plot('#line-chart-5', happy_Z, {
      grid  : {
        hoverable  : true,
        borderColor: '#111111',
        borderWidth: 1,
        tickColor  : '#8E8E8E'
      },
      series: {
        shadowSize: 0,
        lines     : {
          show: true
        },
        points    : {
          show: false
        }
      },
      //lines : {
        //fill : false,
        //color: ['#3c8dbc']
      //},
      yaxis : {
        show: true
      },
       xaxis : {
        show: true,
		mode:'time',
		tickFormatter:function(e){
			var d = new Date(e);
			if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() < 10) {
									return  '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();} 
									else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() >= 10) {
										return '0' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();} 
									else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
										return d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();}
									else if (d.getHours() >= 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
										return d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
									else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() < 10) {
										return d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();}
									else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
										return '0' + d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
									else if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
										return '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();} 
									else {
										return d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();}
		}
      }
    })
	
	//Initialize tooltip on hover
    $('<div class="tooltip-inner" id="line-chart-tooltip-5"></div>').css({
      position: 'absolute',
      display : 'none',
      opacity : 0.8
    }).appendTo('body')
	//格式 根据line_name第三个数区分是位移还是温度
    $('#line-chart-5').bind('plothover', function (event, pos, item) {
		
			if (item) {
				var x = item.datapoint[0],
            	y = item.datapoint[1].toFixed(4) //设定精度
				d = new Date(x);
				if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() < 10){
				timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();} 
				else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() >= 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();} 
				else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();}
				else if (d.getHours() >= 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
				else if (d.getHours() >= 10 && d.getMinutes() < 10 && d.getSeconds() < 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + '0' + d.getSeconds();}
				else if (d.getHours() < 10 && d.getMinutes() >= 10 && d.getSeconds() < 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + d.getMinutes() + ':' + '0' + d.getSeconds();}
				else if (d.getHours() < 10 && d.getMinutes() < 10 && d.getSeconds() >= 10) {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + '0' + d.getHours() + ':' + '0' + d.getMinutes() + ':' + d.getSeconds();}
				else {
					timeStr = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();}
						
				$('#line-chart-tooltip-5').html(' 时间 ' +  ':' + timeStr + ' ; ' + ' 距离 ' + ':' + y + ' 米 ')
				.css({ top: item.pageY + 5, left: item.pageX + 5 })
        		.fadeIn(200)
				} else {
					$('#line-chart-tooltip-5').hide()
					}
				
	})
    /* END LINE CHART */

  })
  </script>
</body>
</html>